plugins {
    id "com.android.application"
    id "org.jetbrains.kotlin.android"
    id "com.facebook.react"
}

android {
    namespace 'com.sodam_front_end'
    compileSdkVersion 36
    buildToolsVersion "36.0.0"
    ndkVersion "27.1.12297006"

    defaultConfig {
        applicationId 'com.sodam_front_end'
        minSdkVersion 24
        //noinspection OldTargetApi,EditedTargetSdkVersion
        targetSdkVersion 36
        versionCode 1
        versionName "0.0.1"
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }

    kotlinOptions {
        jvmTarget = '17'
    }

    buildTypes {
        release {
            minifyEnabled false
            shrinkResources false
            crunchPngs false
            proguardFiles(
                    getDefaultProguardFile("proguard-android.txt"),
                    "proguard-rules.pro"
            )
        }
    }

    packagingOptions {
        // Keep only necessary pickFirst to avoid masking real conflicts
        pickFirst '**/libc++_shared.so'
    }
}

// React Native Vector Icons font configuration - DISABLED
// Autolinking is disabled for react-native-vector-icons in react-native.config.js
// Therefore, fonts.gradle cannot be applied as it requires Android plugin configuration
// project.ext.vectoricons = [
//     iconFontNames: [ 'AntDesign.ttf', 'Entypo.ttf', 'EvilIcons.ttf', 'Feather.ttf', 'FontAwesome.ttf', 'FontAwesome5_Brands.ttf', 'FontAwesome5_Regular.ttf', 'FontAwesome5_Solid.ttf', 'Foundation.ttf', 'Ionicons.ttf', 'MaterialIcons.ttf', 'MaterialCommunityIcons.ttf', 'SimpleLineIcons.ttf', 'Octicons.ttf', 'Zocial.ttf' ]
// ]

// apply from: file("../../node_modules/react-native-vector-icons/fonts.gradle")
// Expo modules disabled due to gradle plugin dependency resolution issue
// apply from: new File(["node", "--print", "require.resolve('expo/package.json')"].execute(null, rootDir).text.trim(), "../scripts/autolinking.gradle")
// useExpoModules()

// React Native autolinking is handled automatically by settings.gradle

dependencies {
    implementation "com.facebook.react:react-android"

    // Hermes vs JSC 선택
    if (project.hasProperty("hermesEnabled") && project.property("hermesEnabled") == "true") {
        implementation "com.facebook.react:hermes-android"
    } else {
        implementation "io.github.react-native-community:jsc-android:2026004.+"
    }

    // React Native 라이브러리들은 autolinking으로 자동 처리됨
}
