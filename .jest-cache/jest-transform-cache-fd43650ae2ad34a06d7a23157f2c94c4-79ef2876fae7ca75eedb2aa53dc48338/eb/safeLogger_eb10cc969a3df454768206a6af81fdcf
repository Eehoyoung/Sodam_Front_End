bc022d0644c3c2978d56a446a7edff42
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.safeLogger = exports.default = void 0;
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var SafeLogger = (0, _createClass2.default)(function SafeLogger() {
  var _this = this,
    _options$enableConsol,
    _options$enableLogBox,
    _options$maxLogBoxErr;
  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  (0, _classCallCheck2.default)(this, SafeLogger);
  this.logBoxErrorCount = 0;
  this.error = function () {
    if (!_this.enableConsole) return;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    var errorMessage = args.join(' ');
    if (_this.isLogBoxRelatedError(errorMessage)) {
      _this.logBoxErrorCount++;
      if (_this.logBoxErrorCount >= _this.maxLogBoxErrors) {
        _this.originalConsoleWarn('[SafeLogger] LogBox 무한 루프 감지 - 추가 LogBox 에러 무시');
        _this.enableLogBox = false;
        return;
      }
      _this.originalConsoleWarn.apply(_this, ['[SafeLogger] LogBox 에러 감지:'].concat(args));
      return;
    }
    _this.originalConsoleError.apply(_this, args);
  };
  this.warn = function () {
    if (!_this.enableConsole) return;
    _this.originalConsoleWarn.apply(_this, arguments);
  };
  this.log = function () {
    if (!_this.enableConsole) return;
    _this.originalConsoleLog.apply(_this, arguments);
  };
  this.errorBoundaryLog = function (error, errorInfo) {
    if (!_this.enableConsole) return;
    var errorMessage = `[ErrorBoundary] ${error.message}`;
    if (_this.isLogBoxRelatedError(error.message)) {
      _this.originalConsoleWarn('[ErrorBoundary] LogBox 관련 에러 감지:', errorMessage);
      return;
    }
    _this.originalConsoleError('[ErrorBoundary] 에러 발생:', error);
    if (errorInfo) {
      _this.originalConsoleError('[ErrorBoundary] 에러 정보:', errorInfo);
    }
  };
  this.asyncStorageInfo = function () {
    if (!_this.enableConsole) return;
    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }
    var message = args.join(' ');
    if (_this.isAsyncStorageNullReturn(message)) {
      _this.originalConsoleLog.apply(_this, ['[SafeLogger] AsyncStorage INFO:'].concat(args));
      return;
    }
    _this.originalConsoleLog.apply(_this, args);
  };
  this.asyncStorageError = function () {
    if (!_this.enableConsole) return;
    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }
    var message = args.join(' ');
    if (_this.isAsyncStorageNullReturn(message)) {
      _this.originalConsoleLog.apply(_this, ['[SafeLogger] AsyncStorage null return (normal):'].concat(args));
      return;
    }
    if (_this.isAsyncStorageUnavailable(message)) {
      _this.originalConsoleError.apply(_this, ['[SafeLogger] AsyncStorage unavailable:'].concat(args));
      return;
    }
    _this.originalConsoleWarn.apply(_this, ['[SafeLogger] AsyncStorage warning:'].concat(args));
  };
  this.reset = function () {
    _this.logBoxErrorCount = 0;
    _this.enableLogBox = true;
  };
  this.getStatus = function () {
    return {
      logBoxErrorCount: _this.logBoxErrorCount,
      enableConsole: _this.enableConsole,
      enableLogBox: _this.enableLogBox,
      maxLogBoxErrors: _this.maxLogBoxErrors
    };
  };
  this.isAsyncStorageNullReturn = function (message) {
    var nullReturnKeywords = ['null', 'first launch', 'no token', 'not found', 'empty', 'undefined'];
    var asyncStorageKeywords = ['AsyncStorage', 'getItem', 'hasLaunched', 'userToken', 'token'];
    var hasAsyncStorageKeyword = asyncStorageKeywords.some(function (keyword) {
      return message.toLowerCase().includes(keyword.toLowerCase());
    });
    var hasNullKeyword = nullReturnKeywords.some(function (keyword) {
      return message.toLowerCase().includes(keyword.toLowerCase());
    });
    return hasAsyncStorageKeyword && hasNullKeyword;
  };
  this.isAsyncStorageUnavailable = function (message) {
    var unavailableKeywords = ['AsyncStorage is null', 'NativeModule: AsyncStorage is null', 'AsyncStorage not available', 'AsyncStorage undefined', 'module not found'];
    return unavailableKeywords.some(function (keyword) {
      return message.toLowerCase().includes(keyword.toLowerCase());
    });
  };
  this.isLogBoxRelatedError = function (message) {
    var logBoxKeywords = ['LogBox', 'DevTools', 'render log messages', 'LogBoxStateSubscription', 'Simulated error coming from DevTools'];
    return logBoxKeywords.some(function (keyword) {
      return message.toLowerCase().includes(keyword.toLowerCase());
    });
  };
  this.enableConsole = (_options$enableConsol = options.enableConsole) != null ? _options$enableConsol : true;
  this.enableLogBox = (_options$enableLogBox = options.enableLogBox) != null ? _options$enableLogBox : true;
  this.maxLogBoxErrors = (_options$maxLogBoxErr = options.maxLogBoxErrors) != null ? _options$maxLogBoxErr : 3;
  this.originalConsoleError = console.error;
  this.originalConsoleWarn = console.warn;
  this.originalConsoleLog = console.log;
});
var safeLogger = exports.safeLogger = new SafeLogger({
  enableConsole: __DEV__,
  enableLogBox: __DEV__,
  maxLogBoxErrors: 3
});
var _default = exports.default = safeLogger;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTYWZlTG9nZ2VyIiwiX2NyZWF0ZUNsYXNzMiIsImRlZmF1bHQiLCJfdGhpcyIsIl9vcHRpb25zJGVuYWJsZUNvbnNvbCIsIl9vcHRpb25zJGVuYWJsZUxvZ0JveCIsIl9vcHRpb25zJG1heExvZ0JveEVyciIsIm9wdGlvbnMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJfY2xhc3NDYWxsQ2hlY2syIiwibG9nQm94RXJyb3JDb3VudCIsImVycm9yIiwiZW5hYmxlQ29uc29sZSIsIl9sZW4iLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiZXJyb3JNZXNzYWdlIiwiam9pbiIsImlzTG9nQm94UmVsYXRlZEVycm9yIiwibWF4TG9nQm94RXJyb3JzIiwib3JpZ2luYWxDb25zb2xlV2FybiIsImVuYWJsZUxvZ0JveCIsImFwcGx5IiwiY29uY2F0Iiwib3JpZ2luYWxDb25zb2xlRXJyb3IiLCJ3YXJuIiwibG9nIiwib3JpZ2luYWxDb25zb2xlTG9nIiwiZXJyb3JCb3VuZGFyeUxvZyIsImVycm9ySW5mbyIsIm1lc3NhZ2UiLCJhc3luY1N0b3JhZ2VJbmZvIiwiX2xlbjIiLCJfa2V5MiIsImlzQXN5bmNTdG9yYWdlTnVsbFJldHVybiIsImFzeW5jU3RvcmFnZUVycm9yIiwiX2xlbjMiLCJfa2V5MyIsImlzQXN5bmNTdG9yYWdlVW5hdmFpbGFibGUiLCJyZXNldCIsImdldFN0YXR1cyIsIm51bGxSZXR1cm5LZXl3b3JkcyIsImFzeW5jU3RvcmFnZUtleXdvcmRzIiwiaGFzQXN5bmNTdG9yYWdlS2V5d29yZCIsInNvbWUiLCJrZXl3b3JkIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImhhc051bGxLZXl3b3JkIiwidW5hdmFpbGFibGVLZXl3b3JkcyIsImxvZ0JveEtleXdvcmRzIiwiY29uc29sZSIsInNhZmVMb2dnZXIiLCJleHBvcnRzIiwiX19ERVZfXyIsIl9kZWZhdWx0Il0sInNvdXJjZXMiOlsic2FmZUxvZ2dlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogU2FmZSBMb2dnZXIgVXRpbGl0eVxyXG4gKiBMb2dCb3gg66y07ZWcIOujqO2UhOulvCDrsKnsp4DtlZjquLAg7JyE7ZWcIOyViOyghO2VnCDroZzquYUg7Jyg7Yu466as7YuwXHJcbiAqL1xyXG5cclxuaW50ZXJmYWNlIFNhZmVMb2dnZXJPcHRpb25zIHtcclxuICAgIGVuYWJsZUNvbnNvbGU/OiBib29sZWFuO1xyXG4gICAgZW5hYmxlTG9nQm94PzogYm9vbGVhbjtcclxuICAgIG1heExvZ0JveEVycm9ycz86IG51bWJlcjtcclxufVxyXG5cclxuY2xhc3MgU2FmZUxvZ2dlciB7XHJcbiAgICBwcml2YXRlIGxvZ0JveEVycm9yQ291bnQgPSAwO1xyXG4gICAgcHJpdmF0ZSBtYXhMb2dCb3hFcnJvcnM6IG51bWJlcjtcclxuICAgIHByaXZhdGUgZW5hYmxlQ29uc29sZTogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgZW5hYmxlTG9nQm94OiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBvcmlnaW5hbENvbnNvbGVFcnJvcjogdHlwZW9mIGNvbnNvbGUuZXJyb3I7XHJcbiAgICBwcml2YXRlIG9yaWdpbmFsQ29uc29sZVdhcm46IHR5cGVvZiBjb25zb2xlLndhcm47XHJcbiAgICBwcml2YXRlIG9yaWdpbmFsQ29uc29sZUxvZzogdHlwZW9mIGNvbnNvbGUubG9nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFNhZmVMb2dnZXJPcHRpb25zID0ge30pIHtcclxuICAgICAgICB0aGlzLmVuYWJsZUNvbnNvbGUgPSBvcHRpb25zLmVuYWJsZUNvbnNvbGUgPz8gdHJ1ZTtcclxuICAgICAgICB0aGlzLmVuYWJsZUxvZ0JveCA9IG9wdGlvbnMuZW5hYmxlTG9nQm94ID8/IHRydWU7XHJcbiAgICAgICAgdGhpcy5tYXhMb2dCb3hFcnJvcnMgPSBvcHRpb25zLm1heExvZ0JveEVycm9ycyA/PyAzO1xyXG5cclxuICAgICAgICAvLyDsm5Drs7ggY29uc29sZSDrqZTshJzrk5wg7KCA7J6lXHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbENvbnNvbGVFcnJvciA9IGNvbnNvbGUuZXJyb3I7XHJcbiAgICAgICAgdGhpcy5vcmlnaW5hbENvbnNvbGVXYXJuID0gY29uc29sZS53YXJuO1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxDb25zb2xlTG9nID0gY29uc29sZS5sb2c7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDslYjsoITtlZwg7JeQ65+sIOuhnOq5hVxyXG4gICAgICogTG9nQm94IOq0gOugqCDsl5Drn6zripQg66y07Iuc7ZWY6rOgLCDsnbzrsJgg7JeQ65+s66eMIOuhnOq5hVxyXG4gICAgICovXHJcbiAgICBlcnJvciA9ICguLi5hcmdzOiBhbnlbXSkgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVDb25zb2xlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGFyZ3Muam9pbignICcpO1xyXG5cclxuICAgICAgICAvLyBMb2dCb3gg6rSA66CoIOyXkOufrOyduOyngCDtmZXsnbhcclxuICAgICAgICBpZiAodGhpcy5pc0xvZ0JveFJlbGF0ZWRFcnJvcihlcnJvck1lc3NhZ2UpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9nQm94RXJyb3JDb3VudCsrO1xyXG5cclxuICAgICAgICAgICAgLy8gTG9nQm94IOyXkOufrOqwgCDsnoTqs4TqsJLsnYQg7LSI6rO87ZWY66m0IExvZ0JveCDruYTtmZzshLHtmZRcclxuICAgICAgICAgICAgaWYgKHRoaXMubG9nQm94RXJyb3JDb3VudCA+PSB0aGlzLm1heExvZ0JveEVycm9ycykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcmlnaW5hbENvbnNvbGVXYXJuKCdbU2FmZUxvZ2dlcl0gTG9nQm94IOustO2VnCDro6jtlIQg6rCQ7KeAIC0g7LaU6rCAIExvZ0JveCDsl5Drn6wg66y07IucJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZUxvZ0JveCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBMb2dCb3gg7JeQ65+s64qUIHdhcm7snLzroZwg7LKY66asXHJcbiAgICAgICAgICAgIHRoaXMub3JpZ2luYWxDb25zb2xlV2FybignW1NhZmVMb2dnZXJdIExvZ0JveCDsl5Drn6wg6rCQ7KeAOicsIC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDsnbzrsJgg7JeQ65+s64qUIOygleyDgSDsspjrpqxcclxuICAgICAgICB0aGlzLm9yaWdpbmFsQ29uc29sZUVycm9yKC4uLmFyZ3MpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOyViOyghO2VnCDqsr3qs6Ag66Gc6rmFXHJcbiAgICAgKi9cclxuICAgIHdhcm4gPSAoLi4uYXJnczogYW55W10pID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlQ29uc29sZSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxDb25zb2xlV2FybiguLi5hcmdzKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDslYjsoITtlZwg7J2867CYIOuhnOq5hVxyXG4gICAgICovXHJcbiAgICBsb2cgPSAoLi4uYXJnczogYW55W10pID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlQ29uc29sZSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxDb25zb2xlTG9nKC4uLmFyZ3MpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEVycm9yQm91bmRhcnkg7KCE7JqpIOyViOyghO2VnCDsl5Drn6wg66Gc6rmFXHJcbiAgICAgKi9cclxuICAgIGVycm9yQm91bmRhcnlMb2cgPSAoZXJyb3I6IEVycm9yLCBlcnJvckluZm8/OiBhbnkpID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlQ29uc29sZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBFcnJvckJvdW5kYXJ5IOyXkOufrOuKlCDtla3sg4Eg66Gc6rmF7ZWY65CYLCBMb2dCb3gg7Yq466as6rGw66W8IO2UvO2VqFxyXG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGBbRXJyb3JCb3VuZGFyeV0gJHtlcnJvci5tZXNzYWdlfWA7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzTG9nQm94UmVsYXRlZEVycm9yKGVycm9yLm1lc3NhZ2UpKSB7XHJcbiAgICAgICAgICAgIC8vIExvZ0JveCDqtIDroKgg7JeQ65+s64qUIOuLqOyInCDthY3siqTtirjroZzrp4wg66Gc6rmFXHJcbiAgICAgICAgICAgIHRoaXMub3JpZ2luYWxDb25zb2xlV2FybignW0Vycm9yQm91bmRhcnldIExvZ0JveCDqtIDroKgg7JeQ65+sIOqwkOyngDonLCBlcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDsnbzrsJgg7JeQ65+s64qUIOygleyDgSDroZzquYVcclxuICAgICAgICB0aGlzLm9yaWdpbmFsQ29uc29sZUVycm9yKCdbRXJyb3JCb3VuZGFyeV0g7JeQ65+sIOuwnOyDnTonLCBlcnJvcik7XHJcbiAgICAgICAgaWYgKGVycm9ySW5mbykge1xyXG4gICAgICAgICAgICB0aGlzLm9yaWdpbmFsQ29uc29sZUVycm9yKCdbRXJyb3JCb3VuZGFyeV0g7JeQ65+sIOygleuztDonLCBlcnJvckluZm8pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBc3luY1N0b3JhZ2Ug6rSA66CoIOygleuztOyEsSDroZzquYVcclxuICAgICAqIG51bGwg67CY7ZmY7J2AIOygleyDgSDrj5nsnpHsnbTrr4DroZwgSU5GTyDroIjrsqjroZwg7LKY66asXHJcbiAgICAgKi9cclxuICAgIGFzeW5jU3RvcmFnZUluZm8gPSAoLi4uYXJnczogYW55W10pID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlQ29uc29sZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXJncy5qb2luKCcgJyk7XHJcblxyXG4gICAgICAgIC8vIEFzeW5jU3RvcmFnZSBudWxsIOuwmO2ZmCDqtIDroKgg66mU7Iuc7KeA64qUIElORk8g66CI67Ko66GcIOyymOumrFxyXG4gICAgICAgIGlmICh0aGlzLmlzQXN5bmNTdG9yYWdlTnVsbFJldHVybihtZXNzYWdlKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9yaWdpbmFsQ29uc29sZUxvZygnW1NhZmVMb2dnZXJdIEFzeW5jU3RvcmFnZSBJTkZPOicsIC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDsnbzrsJgg7KCV67O064qUIGxvZ+uhnCDsspjrpqxcclxuICAgICAgICB0aGlzLm9yaWdpbmFsQ29uc29sZUxvZyguLi5hcmdzKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBc3luY1N0b3JhZ2Ug6rSA66CoIOyXkOufrCDroZzquYVcclxuICAgICAqIOyLpOygnCDsl5Drn6zrp4wgZXJyb3Ig66CI67Ko66GcIOyymOumrFxyXG4gICAgICovXHJcbiAgICBhc3luY1N0b3JhZ2VFcnJvciA9ICguLi5hcmdzOiBhbnlbXSkgPT4ge1xyXG4gICAgICAgIGlmICghdGhpcy5lbmFibGVDb25zb2xlKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzLmpvaW4oJyAnKTtcclxuXHJcbiAgICAgICAgLy8gQXN5bmNTdG9yYWdlIG51bGwg67CY7ZmY7J2AIOyXkOufrOqwgCDslYTri5hcclxuICAgICAgICBpZiAodGhpcy5pc0FzeW5jU3RvcmFnZU51bGxSZXR1cm4obWVzc2FnZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5vcmlnaW5hbENvbnNvbGVMb2coJ1tTYWZlTG9nZ2VyXSBBc3luY1N0b3JhZ2UgbnVsbCByZXR1cm4gKG5vcm1hbCk6JywgLi4uYXJncyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFzeW5jU3RvcmFnZSDqsIDsmqnshLEg66y47KCc66eMIOyLpOygnCDsl5Drn6zroZwg7LKY66asXHJcbiAgICAgICAgaWYgKHRoaXMuaXNBc3luY1N0b3JhZ2VVbmF2YWlsYWJsZShtZXNzYWdlKSkge1xyXG4gICAgICAgICAgICB0aGlzLm9yaWdpbmFsQ29uc29sZUVycm9yKCdbU2FmZUxvZ2dlcl0gQXN5bmNTdG9yYWdlIHVuYXZhaWxhYmxlOicsIC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDquLDtg4AgQXN5bmNTdG9yYWdlIOq0gOugqCDrrLjsoJzripQgd2FybuycvOuhnCDsspjrpqxcclxuICAgICAgICB0aGlzLm9yaWdpbmFsQ29uc29sZVdhcm4oJ1tTYWZlTG9nZ2VyXSBBc3luY1N0b3JhZ2Ugd2FybmluZzonLCAuLi5hcmdzKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDroZzqsbAg7IOB7YOcIOumrOyFi1xyXG4gICAgICovXHJcbiAgICByZXNldCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLmxvZ0JveEVycm9yQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuZW5hYmxlTG9nQm94ID0gdHJ1ZTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDtmITsnqwg7IOB7YOcIOygleuztFxyXG4gICAgICovXHJcbiAgICBnZXRTdGF0dXMgPSAoKSA9PiAoe1xyXG4gICAgICAgIGxvZ0JveEVycm9yQ291bnQ6IHRoaXMubG9nQm94RXJyb3JDb3VudCxcclxuICAgICAgICBlbmFibGVDb25zb2xlOiB0aGlzLmVuYWJsZUNvbnNvbGUsXHJcbiAgICAgICAgZW5hYmxlTG9nQm94OiB0aGlzLmVuYWJsZUxvZ0JveCxcclxuICAgICAgICBtYXhMb2dCb3hFcnJvcnM6IHRoaXMubWF4TG9nQm94RXJyb3JzXHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFzeW5jU3RvcmFnZSBudWxsIOuwmO2ZmCDqtIDroKgg66mU7Iuc7KeA7J247KeAIO2ZleyduFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGlzQXN5bmNTdG9yYWdlTnVsbFJldHVybiA9IChtZXNzYWdlOiBzdHJpbmcpOiBib29sZWFuID0+IHtcclxuICAgICAgICBjb25zdCBudWxsUmV0dXJuS2V5d29yZHMgPSBbXHJcbiAgICAgICAgICAgICdudWxsJyxcclxuICAgICAgICAgICAgJ2ZpcnN0IGxhdW5jaCcsXHJcbiAgICAgICAgICAgICdubyB0b2tlbicsXHJcbiAgICAgICAgICAgICdub3QgZm91bmQnLFxyXG4gICAgICAgICAgICAnZW1wdHknLFxyXG4gICAgICAgICAgICAndW5kZWZpbmVkJ1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGNvbnN0IGFzeW5jU3RvcmFnZUtleXdvcmRzID0gW1xyXG4gICAgICAgICAgICAnQXN5bmNTdG9yYWdlJyxcclxuICAgICAgICAgICAgJ2dldEl0ZW0nLFxyXG4gICAgICAgICAgICAnaGFzTGF1bmNoZWQnLFxyXG4gICAgICAgICAgICAndXNlclRva2VuJyxcclxuICAgICAgICAgICAgJ3Rva2VuJ1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGNvbnN0IGhhc0FzeW5jU3RvcmFnZUtleXdvcmQgPSBhc3luY1N0b3JhZ2VLZXl3b3Jkcy5zb21lKGtleXdvcmQgPT5cclxuICAgICAgICAgICAgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGtleXdvcmQudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBoYXNOdWxsS2V5d29yZCA9IG51bGxSZXR1cm5LZXl3b3Jkcy5zb21lKGtleXdvcmQgPT5cclxuICAgICAgICAgICAgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGtleXdvcmQudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICByZXR1cm4gaGFzQXN5bmNTdG9yYWdlS2V5d29yZCAmJiBoYXNOdWxsS2V5d29yZDtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBc3luY1N0b3JhZ2Ug6rCA7Jqp7ISxIOusuOygnOyduOyngCDtmZXsnbhcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBpc0FzeW5jU3RvcmFnZVVuYXZhaWxhYmxlID0gKG1lc3NhZ2U6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgIGNvbnN0IHVuYXZhaWxhYmxlS2V5d29yZHMgPSBbXHJcbiAgICAgICAgICAgICdBc3luY1N0b3JhZ2UgaXMgbnVsbCcsXHJcbiAgICAgICAgICAgICdOYXRpdmVNb2R1bGU6IEFzeW5jU3RvcmFnZSBpcyBudWxsJyxcclxuICAgICAgICAgICAgJ0FzeW5jU3RvcmFnZSBub3QgYXZhaWxhYmxlJyxcclxuICAgICAgICAgICAgJ0FzeW5jU3RvcmFnZSB1bmRlZmluZWQnLFxyXG4gICAgICAgICAgICAnbW9kdWxlIG5vdCBmb3VuZCdcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gdW5hdmFpbGFibGVLZXl3b3Jkcy5zb21lKGtleXdvcmQgPT5cclxuICAgICAgICAgICAgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGtleXdvcmQudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIExvZ0JveCDqtIDroKgg7JeQ65+s7J247KeAIO2ZleyduFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGlzTG9nQm94UmVsYXRlZEVycm9yID0gKG1lc3NhZ2U6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgIGNvbnN0IGxvZ0JveEtleXdvcmRzID0gW1xyXG4gICAgICAgICAgICAnTG9nQm94JyxcclxuICAgICAgICAgICAgJ0RldlRvb2xzJyxcclxuICAgICAgICAgICAgJ3JlbmRlciBsb2cgbWVzc2FnZXMnLFxyXG4gICAgICAgICAgICAnTG9nQm94U3RhdGVTdWJzY3JpcHRpb24nLFxyXG4gICAgICAgICAgICAnU2ltdWxhdGVkIGVycm9yIGNvbWluZyBmcm9tIERldlRvb2xzJ1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiBsb2dCb3hLZXl3b3Jkcy5zb21lKGtleXdvcmQgPT5cclxuICAgICAgICAgICAgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGtleXdvcmQudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICApO1xyXG4gICAgfTtcclxufVxyXG5cclxuLy8g7KCE7JetIFNhZmVMb2dnZXIg7J247Iqk7YS07IqkXHJcbmV4cG9ydCBjb25zdCBzYWZlTG9nZ2VyID0gbmV3IFNhZmVMb2dnZXIoe1xyXG4gICAgZW5hYmxlQ29uc29sZTogX19ERVZfXyxcclxuICAgIGVuYWJsZUxvZ0JveDogX19ERVZfXyxcclxuICAgIG1heExvZ0JveEVycm9yczogM1xyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHNhZmVMb2dnZXI7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0lBV01BLFVBQVUsT0FBQUMsYUFBQSxDQUFBQyxPQUFBLEVBU1osU0FBQUYsV0FBQSxFQUE2QztFQUFBLElBQUFHLEtBQUE7SUFBQUMscUJBQUE7SUFBQUMscUJBQUE7SUFBQUMscUJBQUE7RUFBQSxJQUFqQ0MsT0FBMEIsR0FBQUMsU0FBQSxDQUFBQyxNQUFBLFFBQUFELFNBQUEsUUFBQUUsU0FBQSxHQUFBRixTQUFBLE1BQUcsQ0FBQyxDQUFDO0VBQUEsSUFBQUcsZ0JBQUEsQ0FBQVQsT0FBQSxRQUFBRixVQUFBO0VBQUEsS0FSbkNZLGdCQUFnQixHQUFHLENBQUM7RUFBQSxLQXVCNUJDLEtBQUssR0FBRyxZQUFvQjtJQUN4QixJQUFJLENBQUNWLEtBQUksQ0FBQ1csYUFBYSxFQUFF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