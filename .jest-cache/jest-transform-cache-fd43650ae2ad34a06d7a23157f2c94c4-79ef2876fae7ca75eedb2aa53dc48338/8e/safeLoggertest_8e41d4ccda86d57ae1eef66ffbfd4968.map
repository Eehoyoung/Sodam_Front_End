{"version":3,"names":["describe","beforeEach","jest","resetModules","test","isolateModules","errorSpy","spyOn","console","mockImplementation","warnSpy","logSpy","mod","require","logger","safeLogger","error","expect","toHaveBeenCalled","mockClear","mock","calls","some","c","String","includes","toBe","asyncStorageInfo","mockRestore"],"sources":["safeLogger.test.ts"],"sourcesContent":["/*\r\n * Tests for safeLogger utility\r\n */\r\n\r\ndescribe('safeLogger', () => {\r\n  beforeEach(() => {\r\n    jest.resetModules();\r\n  });\r\n\r\n  test('logs regular errors via console.error and filters LogBox-related errors to warn', () => {\r\n    jest.isolateModules(() => {\r\n      const errorSpy = jest.spyOn(console, 'error').mockImplementation(() => {});\r\n      const warnSpy = jest.spyOn(console, 'warn').mockImplementation(() => {});\r\n      const logSpy = jest.spyOn(console, 'log').mockImplementation(() => {});\r\n\r\n      const mod = require('../../utils/safeLogger');\r\n      const logger = mod.safeLogger as typeof mod.safeLogger;\r\n\r\n      // Regular error should go to error\r\n      logger.error('Regular failure occurred');\r\n      expect(errorSpy).toHaveBeenCalled();\r\n\r\n      // LogBox error should be downgraded to warn with prefix\r\n      warnSpy.mockClear();\r\n      logger.error('Simulated error coming from DevTools / LogBoxStateSubscription');\r\n      expect(warnSpy).toHaveBeenCalled();\r\n      expect(\r\n        warnSpy.mock.calls.some(c => String(c[0]).includes('[SafeLogger] LogBox 에러 감지:'))\r\n      ).toBe(true);\r\n\r\n      // AsyncStorage info path\r\n      logSpy.mockClear();\r\n      logger.asyncStorageInfo('AsyncStorage getItem returned null for userToken (first launch)');\r\n      expect(logSpy).toHaveBeenCalled();\r\n      expect(\r\n        logSpy.mock.calls.some(c => String(c[0]).includes('[SafeLogger] AsyncStorage INFO:'))\r\n      ).toBe(true);\r\n\r\n      errorSpy.mockRestore();\r\n      warnSpy.mockRestore();\r\n      logSpy.mockRestore();\r\n    });\r\n  });\r\n});\r\n"],"mappings":";;AAIAA,QAAQ,CAAC,YAAY,EAAE,YAAM;EAC3BC,UAAU,CAAC,YAAM;IACfC,IAAI,CAACC,YAAY,CAAC,CAAC;EACrB,CAAC,CAAC;EAEFC,IAAI,CAAC,iFAAiF,EAAE,YAAM;IAC5FF,IAAI,CAACG,cAAc,CAAC,YAAM;MACxB,IAAMC,QAAQ,GAAGJ,IAAI,CAACK,KAAK,CAACC,OAAO,EAAE,OAAO,CAAC,CAACC,kBAAkB,CAAC,YAAM,CAAC,CAAC,CAAC;MAC1E,IAAMC,OAAO,GAAGR,IAAI,CAACK,KAAK,CAACC,OAAO,EAAE,MAAM,CAAC,CAACC,kBAAkB,CAAC,YAAM,CAAC,CAAC,CAAC;MACxE,IAAME,MAAM,GAAGT,IAAI,CAACK,KAAK,CAACC,OAAO,EAAE,KAAK,CAAC,CAACC,kBAAkB,CAAC,YAAM,CAAC,CAAC,CAAC;MAEtE,IAAMG,GAAG,GAAGC,OAAO,CAAC,wBAAwB,CAAC;MAC7C,IAAMC,MAAM,GAAGF,GAAG,CAACG,UAAmC;MAGtDD,MAAM,CAACE,KAAK,CAAC,0BAA0B,CAAC;MACxCC,MAAM,CAACX,QAAQ,CAAC,CAACY,gBAAgB,CAAC,CAAC;MAGnCR,OAAO,CAACS,SAAS,CAAC,CAAC;MACnBL,MAAM,CAACE,KAAK,CAAC,gEAAgE,CAAC;MAC9EC,MAAM,CAACP,OAAO,CAAC,CAACQ,gBAAgB,CAAC,CAAC;MAClCD,MAAM,CACJP,OAAO,CAACU,IAAI,CAACC,KAAK,CAACC,IAAI,CAAC,UAAAC,CAAC;QAAA,OAAIC,MAAM,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAACE,QAAQ,CAAC,4BAA4B,CAAC;MAAA,EAClF,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;MAGZf,MAAM,CAACQ,SAAS,CAAC,CAAC;MAClBL,MAAM,CAACa,gBAAgB,CAAC,iEAAiE,CAAC;MAC1FV,MAAM,CAACN,MAAM,CAAC,CAACO,gBAAgB,CAAC,CAAC;MACjCD,MAAM,CACJN,MAAM,CAACS,IAAI,CAACC,KAAK,CAACC,IAAI,CAAC,UAAAC,CAAC;QAAA,OAAIC,MAAM,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAACE,QAAQ,CAAC,iCAAiC,CAAC;MAAA,EACtF,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;MAEZpB,QAAQ,CAACsB,WAAW,CAAC,CAAC;MACtBlB,OAAO,CAACkB,WAAW,CAAC,CAAC;MACrBjB,MAAM,CAACiB,WAAW,CAAC,CAAC;IACtB,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}