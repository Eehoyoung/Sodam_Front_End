{"version":3,"names":["_fs","_interopRequireDefault","require","_path","ROOT","path","resolve","__dirname","LOG_FILES","join","filter","f","fs","existsSync","FORBIDDEN_PATTERNS","REQUIRED_HINTS","describe","length","test","expect","toBe","_loop","file","basename","content","readFileSync","forEach","re","not","toMatch","hasAnyHint","some"],"sources":["boot_logcat.test.ts"],"sourcesContent":["import fs from 'fs';\r\nimport path from 'path';\r\n\r\nconst ROOT = path.resolve(__dirname, '..', '..');\r\nconst LOG_FILES = [\r\n  path.join(ROOT, 'Medium-Phone-Android-15_2025-08-21_011004.logcat'),\r\n  path.join(ROOT, 'Medium-Phone-Android-15_2025-08-21_010127.logcat'),\r\n].filter(f => fs.existsSync(f));\r\n\r\nconst FORBIDDEN_PATTERNS = [\r\n  /Can't find ViewManager 'RNCSafeAreaProvider'/i,\r\n  /RCTRNCSafeAreaProvider/i,\r\n  /TurboModuleRegistry\\.getEnforcing\\('RNGestureHandlerModule'\\) could not be found/i,\r\n  /AndroidRuntime.*FATAL EXCEPTION/i,\r\n];\r\n\r\nconst REQUIRED_HINTS = [\r\n  /\\[RECOVERY\\] RNGH not available at import time:/i,\r\n  /\\[RECOVERY\\] Using View fallback as root/i,\r\n];\r\n\r\ndescribe('Boot Logcat validation', () => {\r\n  if (LOG_FILES.length === 0) {\r\n    test('skipped (no log files present)', () => {\r\n      expect(true).toBe(true);\r\n    });\r\n    return;\r\n  }\r\n\r\n  for (const file of LOG_FILES) {\r\n    test(`validates ${path.basename(file)}`, () => {\r\n      const content = fs.readFileSync(file, 'utf8');\r\n\r\n      FORBIDDEN_PATTERNS.forEach(re => {\r\n        expect(content).not.toMatch(re);\r\n      });\r\n\r\n      // At least one of the hints should appear to confirm our recovery path executed\r\n      const hasAnyHint = REQUIRED_HINTS.some(re => re.test(content));\r\n      expect(hasAnyHint).toBe(true);\r\n    });\r\n  }\r\n});\r\n"],"mappings":";;;AAAA,IAAAA,GAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEA,IAAME,IAAI,GAAGC,aAAI,CAACC,OAAO,CAACC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC;AAChD,IAAMC,SAAS,GAAG,CAChBH,aAAI,CAACI,IAAI,CAACL,IAAI,EAAE,kDAAkD,CAAC,EACnEC,aAAI,CAACI,IAAI,CAACL,IAAI,EAAE,kDAAkD,CAAC,CACpE,CAACM,MAAM,CAAC,UAAAC,CAAC;EAAA,OAAIC,WAAE,CAACC,UAAU,CAACF,CAAC,CAAC;AAAA,EAAC;AAE/B,IAAMG,kBAAkB,GAAG,CACzB,+CAA+C,EAC/C,yBAAyB,EACzB,mFAAmF,EACnF,kCAAkC,CACnC;AAED,IAAMC,cAAc,GAAG,CACrB,kDAAkD,EAClD,2CAA2C,CAC5C;AAEDC,QAAQ,CAAC,wBAAwB,EAAE,YAAM;EACvC,IAAIR,SAAS,CAACS,MAAM,KAAK,CAAC,EAAE;IAC1BC,IAAI,CAAC,gCAAgC,EAAE,YAAM;MAC3CC,MAAM,CAAC,IAAI,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;IACzB,CAAC,CAAC;IACF;EACF;EAAC,IAAAC,KAAA,YAAAA,MAAAC,IAAA,EAE6B;IAC5BJ,IAAI,CAAC,aAAab,aAAI,CAACkB,QAAQ,CAACD,IAAI,CAAC,EAAE,EAAE,YAAM;MAC7C,IAAME,OAAO,GAAGZ,WAAE,CAACa,YAAY,CAACH,IAAI,EAAE,MAAM,CAAC;MAE7CR,kBAAkB,CAACY,OAAO,CAAC,UAAAC,EAAE,EAAI;QAC/BR,MAAM,CAACK,OAAO,CAAC,CAACI,GAAG,CAACC,OAAO,CAACF,EAAE,CAAC;MACjC,CAAC,CAAC;MAGF,IAAMG,UAAU,GAAGf,cAAc,CAACgB,IAAI,CAAC,UAAAJ,EAAE;QAAA,OAAIA,EAAE,CAACT,IAAI,CAACM,OAAO,CAAC;MAAA,EAAC;MAC9DL,MAAM,CAACW,UAAU,CAAC,CAACV,IAAI,CAAC,IAAI,CAAC;IAC/B,CAAC,CAAC;EACJ,CAAC;EAZD,KAAK,IAAME,IAAI,IAAId,SAAS;IAAAa,KAAA,CAAAC,IAAA;EAAA;AAa9B,CAAC,CAAC","ignoreList":[]}