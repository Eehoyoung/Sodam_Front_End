{"version":3,"names":["_react","_interopRequireWildcard","require","_safeLogger","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_callSuper","_getPrototypeOf2","_possibleConstructorReturn2","_isNativeReflectConstruct","Reflect","construct","constructor","apply","Boolean","prototype","valueOf","InitializationErrorBoundary","exports","_Component","props","_this","_classCallCheck2","state","hasError","_inherits2","_createClass2","key","value","isTimingIssue","error","_error$message","_error$name","errorMessage","message","toLowerCase","errorName","name","timingPatterns","some","pattern","includes","componentDidCatch","errorInfo","handleTimingIssue","handleRegularError","console","warn","safeLogger","stack","componentStack","timestamp","Date","toISOString","severity","type","impact","userVisible","onTimingIssue","__DEV__","group","groupEnd","setState","render","jsxs","style","flex","justifyContent","alignItems","padding","backgroundColor","children","jsx","borderRadius","fontSize","maxWidth","overflow","getDerivedStateFromError","Component","withInitializationErrorBoundary","errorBoundaryProps","WrappedComponent","assign","displayName","_default"],"sources":["InitializationErrorBoundary.tsx"],"sourcesContent":["import React, {Component, ReactNode} from 'react';\r\nimport {safeLogger} from '../utils/safeLogger';\r\n\r\n/**\r\n * InitializationErrorBoundary Props Interface\r\n */\r\ninterface InitializationErrorBoundaryProps {\r\n    children: ReactNode;\r\n    onTimingIssue?: (error: Error, errorInfo: React.ErrorInfo) => void;\r\n}\r\n\r\n/**\r\n * InitializationErrorBoundary State Interface\r\n */\r\ninterface InitializationErrorBoundaryState {\r\n    hasError: boolean;\r\n    error?: Error;\r\n}\r\n\r\n/**\r\n * Specialized Error Boundary for React Native initialization timing issues\r\n * Specifically handles ReactNoCrashSoftException and other framework timing conflicts\r\n * without showing error UI to users since these are non-critical timing issues.\r\n */\r\nexport class InitializationErrorBoundary extends Component<\r\n    InitializationErrorBoundaryProps,\r\n    InitializationErrorBoundaryState\r\n> {\r\n    constructor(props: InitializationErrorBoundaryProps) {\r\n        super(props);\r\n        this.state = {hasError: false};\r\n    }\r\n\r\n    /**\r\n     * Check if the error is a ReactNoCrashSoftException timing issue\r\n     */\r\n    private isTimingIssue(error: Error): boolean {\r\n        const errorMessage = error.message?.toLowerCase() || '';\r\n        const errorName = error.name?.toLowerCase() || '';\r\n\r\n        // Check for ReactNoCrashSoftException patterns\r\n        const timingPatterns = [\r\n            'reactnocrashsoftexception',\r\n            'onwindowfocuschange',\r\n            'context is not ready',\r\n            'tried to access',\r\n            'while context is not ready',\r\n            'timing',\r\n            'initialization'\r\n        ];\r\n\r\n        return timingPatterns.some(pattern =>\r\n            errorMessage.includes(pattern) || errorName.includes(pattern)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Enhanced error handling for timing issues\r\n     */\r\n    static getDerivedStateFromError(error: Error): InitializationErrorBoundaryState {\r\n        // Don't update state for timing issues - let the app continue\r\n        return {hasError: false};\r\n    }\r\n\r\n    /**\r\n     * Component did catch with specialized timing issue handling\r\n     */\r\n    componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\r\n        if (this.isTimingIssue(error)) {\r\n            // Handle as non-critical timing issue\r\n            this.handleTimingIssue(error, errorInfo);\r\n        } else {\r\n            // Handle as regular error\r\n            this.handleRegularError(error, errorInfo);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle ReactNoCrashSoftException and other timing issues\r\n     */\r\n    private handleTimingIssue(error: Error, errorInfo: React.ErrorInfo) {\r\n        console.warn('[TIMING_ISSUE] ReactNoCrashSoftException detected:', error.message);\r\n\r\n        // Log as warning, not error\r\n        safeLogger.warn('React Native timing issue detected (non-critical)', {\r\n            error: {\r\n                name: error.name,\r\n                message: error.message,\r\n                stack: error.stack,\r\n            },\r\n            errorInfo: {\r\n                componentStack: errorInfo.componentStack,\r\n            },\r\n            timestamp: new Date().toISOString(),\r\n            severity: 'warning',\r\n            type: 'timing_issue',\r\n            impact: 'none',\r\n            userVisible: false\r\n        });\r\n\r\n        // Call timing issue callback if provided\r\n        if (this.props.onTimingIssue) {\r\n            this.props.onTimingIssue(error, errorInfo);\r\n        }\r\n\r\n        // Analytics event for tracking frequency\r\n        if (__DEV__) {\r\n            console.group('[TIMING_ISSUE] Detailed Timing Issue Information');\r\n            console.warn('Timing Issue:', error);\r\n            console.warn('Component Stack:', errorInfo.componentStack);\r\n            console.warn('Impact: None - App continues normally');\r\n            console.warn('Action Required: Monitor frequency, optimize if needed');\r\n            console.groupEnd();\r\n        }\r\n\r\n        // Don't set error state - let the app continue\r\n    }\r\n\r\n    /**\r\n     * Handle regular errors (non-timing issues)\r\n     */\r\n    private handleRegularError(error: Error, errorInfo: React.ErrorInfo) {\r\n        console.error('[INIT_ERROR] Critical initialization error:', error);\r\n\r\n        // Log as actual error\r\n        safeLogger.error('Critical initialization error', {\r\n            error: {\r\n                name: error.name,\r\n                message: error.message,\r\n                stack: error.stack,\r\n            },\r\n            errorInfo: {\r\n                componentStack: errorInfo.componentStack,\r\n            },\r\n            timestamp: new Date().toISOString(),\r\n            severity: 'error',\r\n            type: 'initialization_error',\r\n            impact: 'high',\r\n            userVisible: true\r\n        });\r\n\r\n        // Set error state for regular errors\r\n        this.setState({hasError: true, error});\r\n    }\r\n\r\n    render() {\r\n        // Only show error UI for non-timing issues\r\n        if (this.state.hasError && this.state.error && !this.isTimingIssue(this.state.error)) {\r\n            return (\r\n                <div style={{\r\n                    flex: 1,\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    padding: 20,\r\n                    backgroundColor: '#f8f9fa'\r\n                }}>\r\n                    <h2>Initialization Error</h2>\r\n                    <p>A critical error occurred during app initialization.</p>\r\n                    {__DEV__ && (\r\n                        <pre style={{\r\n                            backgroundColor: '#f8d7da',\r\n                            padding: 16,\r\n                            borderRadius: 8,\r\n                            fontSize: 12,\r\n                            maxWidth: '100%',\r\n                            overflow: 'auto'\r\n                        }}>\r\n                            {this.state.error.message}\r\n                        </pre>\r\n                    )}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        // For timing issues and normal operation, render children\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\n/**\r\n * HOC for wrapping components with InitializationErrorBoundary\r\n */\r\nexport function withInitializationErrorBoundary<P extends object>(\r\n    Component: React.ComponentType<P>,\r\n    errorBoundaryProps?: Omit<InitializationErrorBoundaryProps, 'children'>\r\n) {\r\n    const WrappedComponent = (props: P) => (\r\n        <InitializationErrorBoundary {...errorBoundaryProps}>\r\n            <Component {...props} />\r\n        </InitializationErrorBoundary>\r\n    );\r\n\r\n    WrappedComponent.displayName = `withInitializationErrorBoundary(${Component.displayName || Component.name})`;\r\n\r\n    return WrappedComponent;\r\n}\r\n\r\nexport default InitializationErrorBoundary;\r\n"],"mappings":"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","ignoreList":[]}