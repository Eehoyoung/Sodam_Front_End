#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running JSI Safety Pre-commit Checks..."

# Run ESLint with JSI safety rules on staged files
echo "ğŸ“‹ Checking for JSI violations in staged files..."
npx lint-staged --config .lintstagedrc.jsi-safety.json

# Run JSI-specific tests on animation components
echo "ğŸ§ª Running JSI safety tests..."
npm run test:jsi-safety

# Check for worklet safety patterns
echo "âš¡ Validating worklet implementations..."
node scripts/validate-worklets.js

echo "âœ… Pre-commit JSI safety checks completed!"
